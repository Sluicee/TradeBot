# üìö –ò–ù–°–¢–†–£–ö–¶–ò–Ø –ü–û –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Æ v5 –∏ HYBRID

## üéØ –ë—ã—Å—Ç—Ä—ã–π –≤—ã–±–æ—Ä —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏

| –ï—Å–ª–∏ –Ω—É–∂–Ω–æ | –ò—Å–ø–æ–ª—å–∑—É–π |
|------------|-----------|
| **–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å** | üèÜ **HYBRID** |
| **–¢–æ–ª—å–∫–æ –±–æ–∫–æ–≤–æ–π —Ä—ã–Ω–æ–∫** | v5 MR |
| **–¢–æ–ª—å–∫–æ —Ç—Ä–µ–Ω–¥–æ–≤—ã–π —Ä—ã–Ω–æ–∫** | TF (baseline) |
| **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (low DD)** | üèÜ **HYBRID** (1.56% DD) |
| **–í—ã—Å–æ–∫–∏–π Win Rate** | v5 MR –∏–ª–∏ HYBRID (71.4%) |

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: üèÜ **HYBRID** ‚Äî –ª—É—á—à–∏–π –≤—ã–±–æ—Ä –¥–ª—è –≤—Å–µ—Ö —É—Å–ª–æ–≤–∏–π.

---

## üöÄ –ì–ò–ë–†–ò–î–ù–ê–Ø –°–¢–†–ê–¢–ï–ì–ò–Ø

### –ó–∞–ø—É—Å–∫ –±—ç–∫—Ç–µ—Å—Ç–∞
```bash
python backtest_hybrid.py
```

**–í—ã—Ö–æ–¥**:
- CSV: `hybrid_trades.csv`
- –ì—Ä–∞—Ñ–∏–∫: `equity_curve_hybrid.png`
- –ö–æ–Ω—Å–æ–ª—å: –º–µ—Ç—Ä–∏–∫–∏ + –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Ä–µ–∂–∏–º–æ–≤

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (config.py)

```python
# ====================================================================
# –ì–ò–ë–†–ò–î–ù–ê–Ø –°–¢–†–ê–¢–ï–ì–ò–Ø (MR + TF —Å –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ–º –ø–æ ADX)
# ====================================================================

STRATEGY_HYBRID_MODE = "AUTO"  # "AUTO", "MR_ONLY", "TF_ONLY"

# –ü–æ—Ä–æ–≥–∏ ADX –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è
HYBRID_ADX_MR_THRESHOLD = 20  # ADX < 20 ‚Üí Mean Reversion
HYBRID_ADX_TF_THRESHOLD = 25  # ADX > 25 ‚Üí Trend Following

# –†–µ–∂–∏–º –ø–µ—Ä–µ—Ö–æ–¥–Ω–æ–π –∑–æ–Ω—ã (20 <= ADX <= 25)
HYBRID_TRANSITION_MODE = "HOLD"  # "HOLD" (–Ω–µ –≤—Ö–æ–¥–∏—Ç—å) –∏–ª–∏ "LAST" (–ø–æ—Å–ª–µ–¥–Ω–∏–π —Ä–µ–∂–∏–º)

# –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –≤ —Ä–µ–∂–∏–º–µ (–∑–∞—â–∏—Ç–∞ –æ—Ç —á–∞—Å—Ç—ã—Ö –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–π)
HYBRID_MIN_TIME_IN_MODE = 4  # —á–∞—Å–æ–≤
```

### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. **–†–∞—Å—á—ë—Ç ADX** –Ω–∞ –∫–∞–∂–¥–æ–π —Å–≤–µ—á–µ
2. **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–µ–∂–∏–º–∞**:
   - ADX < 20 ‚Üí **Mean Reversion** (–±–æ–∫–æ–≤–∏–∫)
   - ADX > 25 ‚Üí **Trend Following** (—Ç—Ä–µ–Ω–¥)
   - 20-25 ‚Üí –ø–µ—Ä–µ—Ö–æ–¥–Ω–∞—è –∑–æ–Ω–∞ (HOLD –∏–ª–∏ –ø–æ—Å–ª–µ–¥–Ω–∏–π —Ä–µ–∂–∏–º)
3. **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–∏–≥–Ω–∞–ª–∞** –≤ –≤—ã–±—Ä–∞–Ω–Ω–æ–º —Ä–µ–∂–∏–º–µ
4. **–ó–∞—â–∏—Ç–∞ –æ—Ç —á–∞—Å—Ç—ã—Ö –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–π**: –º–∏–Ω–∏–º—É–º 4 —á–∞—Å–∞ –≤ –æ–¥–Ω–æ–º —Ä–µ–∂–∏–º–µ

### –ü—Ä–∏–º–µ—Ä –ª–æ–≥–æ–≤

```
[2025-09-04 16:00] ADX=18.5 < 20 ‚Üí MEAN REVERSION —Ä–µ–∂–∏–º
[2025-09-04 16:00] BUY $109,424 (MR: RSI=28, Z=-2.6)
[2025-09-04 21:00] SELL $110,488 (+0.97%, SIGNAL_EXIT)

[2025-09-30 21:00] ADX=32.1 > 25 ‚Üí TREND FOLLOWING —Ä–µ–∂–∏–º
[2025-09-30 21:00] BUY $114,165 (TF: EMA crossover)
[2025-10-02 15:00] SELL $119,950 (+5.07%, TAKE_PROFIT) üöÄ

Mode Switches: 24
```

### –ê–Ω–∞–ª–∏–∑ —Å–¥–µ–ª–æ–∫

`hybrid_trades.csv`:
```
symbol,entry_time,entry_price,entry_mode,exit_time,exit_price,pnl_percent,pnl_usd,reason,hours_held
BTCUSDT,2025-09-14 15:00,115216.7,MEAN_REVERSION,2025-09-14 20:00,115793.3,0.50,0.11,SIGNAL_EXIT,5.0
BTCUSDT,2025-09-30 21:00,114165.5,TREND_FOLLOWING,2025-10-02 15:00,119950.0,5.07,2.42,TAKE_PROFIT,42.0
```

**–ö–æ–ª–æ–Ω–∫–∞ `entry_mode`**:
- `MEAN_REVERSION` ‚Äî –≤—Ö–æ–¥ –±—ã–ª –≤ MR —Ä–µ–∂–∏–º–µ
- `TREND_FOLLOWING` ‚Äî –≤—Ö–æ–¥ –±—ã–ª –≤ TF —Ä–µ–∂–∏–º–µ

---

## üìä MEAN REVERSION v5

### –ó–∞–ø—É—Å–∫ –±—ç–∫—Ç–µ—Å—Ç–∞
```bash
python backtest_mean_reversion.py
```

**–í—ã—Ö–æ–¥**:
- CSV: `mean_reversion_trades.csv`, `trend_following_trades.csv`
- –ì—Ä–∞—Ñ–∏–∫–∏: `equity_curve_comparison.png`, `zscore_vs_pnl.png`
- –ö–æ–Ω—Å–æ–ª—å: —Å—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ MR vs TF

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è v5 (config.py)

```python
# –ü–∞—Ä–∞–º–µ—Ç—Ä—ã Mean Reversion v5 (–û–ü–¢–ò–ú–ò–ó–ò–†–û–í–ê–ù–ù–´–ï –î–õ–Ø 10-15 –°–î–ï–õ–û–ö)
MR_RSI_OVERSOLD = 40  # –ü–æ—Ä–æ–≥ –ø–µ—Ä–µ–ø—Ä–æ–¥–∞–Ω–Ω–æ—Å—Ç–∏
MR_ZSCORE_BUY_THRESHOLD = -1.8  # Z-score –ø–æ—Ä–æ–≥ –ø–æ–∫—É–ø–∫–∏
MR_ADX_MAX = 35  # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π ADX (—É–º–µ—Ä–µ–Ω–Ω—ã–π —Ç—Ä–µ–Ω–¥ —Ä–∞–∑—Ä–µ—à—ë–Ω)
MR_EMA_DIVERGENCE_MAX = 0.02  # 2% –¥–∏–≤–µ—Ä–≥–µ–Ω—Ü–∏—è EMA (—Ñ–ª—ç—Ç)

# –§–∏–ª—å—Ç—Ä—ã v5 (–£–°–ò–õ–ï–ù–ù–´–ï)
NO_BUY_IF_PRICE_BELOW_N_DAY_LOW_PERCENT = 0.04  # –ù–µ –≤—Ö–æ–¥–∏—Ç—å –µ—Å–ª–∏ —Ü–µ–Ω–∞ < min(24h) * 0.96
NO_BUY_IF_EMA200_SLOPE_NEG = True  # –ë–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏ –ø–∞–¥–∞—é—â–µ–º EMA200
EMA200_NEG_SLOPE_THRESHOLD = -0.003  # -0.3% –Ω–∞–∫–ª–æ–Ω
USE_RED_CANDLES_FILTER = True  # ‚úÖ –í–ö–õ–Æ–ß–ï–ù (–∑–∞—â–∏—Ç–∞ –æ—Ç –ø–∞–¥–∞—é—â–∏—Ö –Ω–æ–∂–µ–π)
USE_VOLUME_FILTER = True  # ‚úÖ –í–ö–õ–Æ–ß–ï–ù (–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –≤—Å–ø–ª–µ—Å–∫–∏ –æ–±—ä—ë–º–∞)
VOLUME_SPIKE_THRESHOLD = 1.5  # –ù–µ –≤—Ö–æ–¥–∏—Ç—å –µ—Å–ª–∏ volume > 1.5x —Å—Ä–µ–¥–Ω–∏–π

# –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π SL v5 (–û–¢–ö–õ–Æ–ß–ï–ù)
ADAPTIVE_SL_ON_RISK = False  # –ù–ï —Ä–∞–±–æ—Ç–∞–ª –≤ v4, –ª—É—á—à–µ –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –≤—Ö–æ–¥
```

### –ò–∑–º–µ–Ω–µ–Ω–∏—è –æ—Ç v4 –∫ v5

| –ü–∞—Ä–∞–º–µ—Ç—Ä | v4 | v5 | –ü–æ—á–µ–º—É |
|----------|----|----|--------|
| `USE_RED_CANDLES_FILTER` | False | **True** | –ó–∞—â–∏—Ç–∞ –æ—Ç –ø–∞–¥–∞—é—â–∏—Ö –Ω–æ–∂–µ–π |
| `NO_BUY_IF_PRICE_BELOW_N_DAY_LOW_PERCENT` | 0.05 | **0.04** | –£—Å–∏–ª–∏–ª–∏ —Ñ–∏–ª—å—Ç—Ä |
| `ADAPTIVE_SL_ON_RISK` | True | **False** | –ù–µ —Ä–∞–±–æ—Ç–∞–ª, –ª—É—á—à–µ –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å |
| `USE_VOLUME_FILTER` | ‚Äî | **True** | –ù–æ–≤—ã–π —Ñ–∏–ª—å—Ç—Ä –≤—Å–ø–ª–µ—Å–∫–æ–≤ –æ–±—ä—ë–º–∞ |

---

## ‚öôÔ∏è –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É —Å—Ç—Ä–∞—Ç–µ–≥–∏—è–º–∏

### –í bot.py / paper_trader.py

```python
# –í —Ñ—É–Ω–∫—Ü–∏–∏ generate_signal()

# –í–∞—Ä–∏–∞–Ω—Ç 1: –ì–∏–±—Ä–∏–¥–Ω–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
signal = signal_generator.generate_signal_hybrid(
	last_mode=self.last_mode,
	last_mode_time=self.last_mode_time
)

# –í–∞—Ä–∏–∞–Ω—Ç 2: Mean Reversion v5 only
signal = signal_generator.generate_signal_mean_reversion()

# –í–∞—Ä–∏–∞–Ω—Ç 3: Trend Following only (baseline)
signal = signal_generator.generate_signal()
```

### –î–ª—è –±—ç–∫—Ç–µ—Å—Ç–∞

```python
# backtest_hybrid.py
res = gen.generate_signal_hybrid(
	last_mode=self.last_mode,
	last_mode_time=self.last_mode_time if self.last_mode_time else 0
)

# backtest_mean_reversion.py (–≤ run_backtest)
if strategy == "mean_reversion":
	res = gen.generate_signal_mean_reversion()
else:
	res = gen.generate_signal()
```

---

## üîß –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

### –ï—Å–ª–∏ –Ω—É–∂–Ω–æ –ë–û–õ–¨–®–ï —Å–¥–µ–ª–æ–∫ –≤ Hybrid:

```python
# –°–Ω–∏–∑–∏—Ç—å –ø–æ—Ä–æ–≥ MR (–±–æ–ª—å—à–µ MR –≤—Ö–æ–¥–æ–≤)
HYBRID_ADX_MR_THRESHOLD = 22  # –±—ã–ª–æ 20

# –£–º–µ–Ω—å—à–∏—Ç—å –∑–∞—â–∏—Ç—É –æ—Ç –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–π
HYBRID_MIN_TIME_IN_MODE = 2  # –±—ã–ª–æ 4
```

### –ï—Å–ª–∏ –Ω—É–∂–Ω–æ –ú–ï–ù–¨–®–ï —Å–¥–µ–ª–æ–∫:

```python
# –ü–æ–≤—ã—Å–∏—Ç—å –ø–æ—Ä–æ–≥ MR (–º–µ–Ω—å—à–µ MR –≤—Ö–æ–¥–æ–≤)
HYBRID_ADX_MR_THRESHOLD = 18  # –±—ã–ª–æ 20

# –£–∂–µ—Å—Ç–æ—á–∏—Ç—å MR —Ñ–∏–ª—å—Ç—Ä—ã
MR_RSI_OVERSOLD = 35  # –±—ã–ª–æ 40
MR_ZSCORE_BUY_THRESHOLD = -2.0  # –±—ã–ª–æ -1.8
```

### –ï—Å–ª–∏ –Ω–∏–∑–∫–∏–π Win Rate:

```python
# –£–∂–µ—Å—Ç–æ—á–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã –ø–∞–¥–∞—é—â–µ–≥–æ –Ω–æ–∂–∞
NO_BUY_IF_PRICE_BELOW_N_DAY_LOW_PERCENT = 0.03  # –±—ã–ª–æ 0.04
VOLUME_SPIKE_THRESHOLD = 1.3  # –±—ã–ª–æ 1.5

# –£–≤–µ–ª–∏—á–∏—Ç—å SL –¥–ª—è MR
MR_STOP_LOSS_PERCENT = 0.035  # –±—ã–ª–æ 0.03
MR_ATR_SL_MULTIPLIER = 3.0  # –±—ã–ª–æ 2.5
```

### –ï—Å–ª–∏ –±–æ–ª—å—à–æ–π Drawdown:

```python
# –£–º–µ–Ω—å—à–∏—Ç—å —Ä–∞–∑–º–µ—Ä—ã –ø–æ–∑–∏—Ü–∏–π
MR_POSITION_SIZE_STRONG = 0.50  # –±—ã–ª–æ 0.70
MR_POSITION_SIZE_MEDIUM = 0.35  # –±—ã–ª–æ 0.50
MR_POSITION_SIZE_WEAK = 0.25  # –±—ã–ª–æ 0.35

# –†–∞–Ω—å—à–µ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å —Ç—Ä–µ–π–ª–∏–Ω–≥
MR_TRAILING_ACTIVATION = 0.005  # –±—ã–ª–æ 0.008 (–∞–∫—Ç–∏–≤–∞—Ü–∏—è –ø–æ—Å–ª–µ +0.5%)
```

---

## üìà –ü–æ–Ω–∏–º–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

### –ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏

- **Total Return** ‚Äî –æ–±—â–∞—è –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å (—Ü–µ–ª—å: >0%)
- **Win Rate** ‚Äî –ø—Ä–æ—Ü–µ–Ω—Ç –ø—Ä–∏–±—ã–ª—å–Ω—ã—Ö —Å–¥–µ–ª–æ–∫ (—Ü–µ–ª—å: >65%)
- **Max Drawdown** ‚Äî –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–æ—Å–∞–¥–∫–∞ (—Ü–µ–ª—å: <10%)
- **Sharpe Ratio** ‚Äî –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å —Å —É—á—ë—Ç–æ–º —Ä–∏—Å–∫–∞ (—Ü–µ–ª—å: >0.5)
- **Avg Win / Avg Loss** ‚Äî —Å—Ä–µ–¥–Ω–∏–π –≤—ã–∏–≥—Ä—ã—à/–ø—Ä–æ–∏–≥—Ä—ã—à (R:R —Ü–µ–ª—å: >1)

### –î–ª—è Hybrid

- **MR Trades / TF Trades** ‚Äî —Å–∫–æ–ª—å–∫–æ —Å–¥–µ–ª–æ–∫ –≤ –∫–∞–∂–¥–æ–º —Ä–µ–∂–∏–º–µ
- **Mode Switches** ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–π —Ä–µ–∂–∏–º–æ–≤
  - –°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ (>50) ‚Üí —É–≤–µ–ª–∏—á–∏—Ç—å `HYBRID_MIN_TIME_IN_MODE`
  - –°–ª–∏—à–∫–æ–º –º–∞–ª–æ (<10) ‚Üí —É–º–µ–Ω—å—à–∏—Ç—å –∑–∞—â–∏—Ç—É –æ—Ç –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–π

### –•–æ—Ä–æ—à–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã

‚úÖ **Hybrid**: 
- –†–∞–≤–Ω–æ–º–µ—Ä–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ MR/TF
- Mode Switches: 15-30 –∑–∞ –º–µ—Å—è—Ü
- TF –ª–æ–≤–∏—Ç –±–æ–ª—å—à–∏–µ –¥–≤–∏–∂–µ–Ω–∏—è (+3-5%)
- MR –∑–∞—â–∏—â–∞–µ—Ç –Ω–∞ –±–æ–∫–æ–≤–∏–∫–µ (+0.5-1%)

‚úÖ **v5 MR**:
- Win Rate > 70%
- Avg Loss < 2%
- –ë—ã—Å—Ç—Ä–æ–µ —É–¥–µ—Ä–∂–∞–Ω–∏–µ (<12h)
- –ù–µ—Ç –±–æ–ª—å—à–∏—Ö –ª–æ—Å—Å–æ–≤

---

## üêõ Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: "AttributeError: 'SignalGenerator' object has no attribute 'indicators'"

**–†–µ—à–µ–Ω–∏–µ**: –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –≤—ã–∑—ã–≤–∞–µ—Ç–µ `compute_indicators()` –ü–ï–†–ï–î `generate_signal_hybrid()`:
```python
gen = SignalGenerator(sub_df)
gen.compute_indicators()  # ‚Üê –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û
res = gen.generate_signal_hybrid()
```

### –ü—Ä–æ–±–ª–µ–º–∞: –°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–π —Ä–µ–∂–∏–º–æ–≤

**–†–µ—à–µ–Ω–∏–µ**: –£–≤–µ–ª–∏—á–∏—Ç—å `HYBRID_MIN_TIME_IN_MODE`:
```python
HYBRID_MIN_TIME_IN_MODE = 6  # –±—ã–ª–æ 4
```

### –ü—Ä–æ–±–ª–µ–º–∞: Hybrid –Ω–µ –≤—Ö–æ–¥–∏—Ç –≤ —Å–¥–µ–ª–∫–∏ (0 trades)

**–†–µ—à–µ–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—Ä–æ–≥–∏ ADX:
```python
# –í–æ–∑–º–æ–∂–Ω–æ ADX –≤—Å–µ–≥–¥–∞ –≤ –ø–µ—Ä–µ—Ö–æ–¥–Ω–æ–π –∑–æ–Ω–µ 20-25
# –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Ä–∞—Å—à–∏—Ä–∏—Ç—å –¥–∏–∞–ø–∞–∑–æ–Ω—ã:
HYBRID_ADX_MR_THRESHOLD = 22  # –±—ã–ª–æ 20
HYBRID_ADX_TF_THRESHOLD = 23  # –±—ã–ª–æ 25
```

### –ü—Ä–æ–±–ª–µ–º–∞: v5 MR —Å–ª–∏—à–∫–æ–º –º–∞–ª–æ —Å–¥–µ–ª–æ–∫ (<5)

**–†–µ—à–µ–Ω–∏–µ**: –°–º—è–≥—á–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã:
```python
MR_RSI_OVERSOLD = 42  # –±—ã–ª–æ 40
MR_ZSCORE_BUY_THRESHOLD = -1.6  # –±—ã–ª–æ -1.8
USE_VOLUME_FILTER = False  # –æ—Ç–∫–ª—é—á–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä –æ–±—ä—ë–º–∞
```

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### 1. –†–∞–∑–Ω—ã–µ –ø–µ—Ä–∏–æ–¥—ã

```bash
# –í backtest_hybrid.py –∏–ª–∏ backtest_mean_reversion.py
period_days = 30   # –ü–æ—Å–ª–µ–¥–Ω–∏–π –º–µ—Å—è—Ü
period_days = 90   # –ü–æ—Å–ª–µ–¥–Ω–∏–µ 3 –º–µ—Å—è—Ü–∞
period_days = 180  # –ü–æ—Å–ª–µ–¥–Ω–∏–µ –ø–æ–ª–≥–æ–¥–∞
```

### 2. –†–∞–∑–Ω—ã–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã

```bash
interval = "15m"  # –°–∫–∞–ª—å–ø–∏–Ω–≥
interval = "1h"   # –ò–Ω—Ç—Ä–∞–¥–µ–π (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
interval = "4h"   # –°–≤–∏–Ω–≥
```

### 3. –†–∞–∑–Ω—ã–µ –º–æ–Ω–µ—Ç—ã

```bash
symbol = "BTCUSDT"
symbol = "ETHUSDT"
symbol = "SOLUSDT"
symbol = "BNBUSDT"
```

### 4. Grid Search

```python
for adx_mr in [18, 20, 22]:
	for adx_tf in [23, 25, 27]:
		HYBRID_ADX_MR_THRESHOLD = adx_mr
		HYBRID_ADX_TF_THRESHOLD = adx_tf
		# ... –∑–∞–ø—É—Å—Ç–∏—Ç—å –±—ç–∫—Ç–µ—Å—Ç
		# —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
```

---

## üöÄ Production Deployment

### 1. Paper Trading

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å paper trader —Å hybrid —Å—Ç—Ä–∞—Ç–µ–≥–∏–µ–π
python paper_trader.py

# –í paper_trader.py –∏–∑–º–µ–Ω–∏—Ç—å:
signal = self.signal_generator.generate_signal_hybrid(
	last_mode=self.last_mode,
	last_mode_time=self.last_mode_time
)
```

### 2. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

**–ß—Ç–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å**:
- –ß–∏—Å–ª–æ —Å–¥–µ–ª–æ–∫ –≤ –¥–µ–Ω—å (—Ü–µ–ª—å: 1-3)
- Win Rate –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ (—Ü–µ–ª—å: >65%)
- Drawdown (—Ü–µ–ª—å: <10%)
- –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ MR/TF —Å–¥–µ–ª–æ–∫
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–π —Ä–µ–∂–∏–º–æ–≤

**–õ–æ–≥–∏**:
```bash
tail -f logs/paper_trading.log
# –°–º–æ—Ç—Ä–µ—Ç—å –Ω–∞:
# - "ADX=XX ‚Üí —Ä–µ–∂–∏–º YY"
# - "BUY/SELL" —Å–∏–≥–Ω–∞–ª—ã
# - "Mode switch: MR ‚Üí TF"
```

### 3. –ñ–∏–≤–∞—è —Ç–æ—Ä–≥–æ–≤–ª—è

**–ü–æ—Å–ª–µ 2-4 –Ω–µ–¥–µ–ª—å —É—Å–ø–µ—à–Ω–æ–≥–æ paper trading**:

```bash
# –í bot.py
INITIAL_BALANCE = 100  # –ù–∞—á–∞—Ç—å —Å –º–∞–ª–æ–≥–æ –±–∞–ª–∞–Ω—Å–∞
USE_PAPER_TRADING = False  # –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –Ω–∞ —Ä–µ–∞–ª—å–Ω—É—é —Ç–æ—Ä–≥–æ–≤–ª—é

python bot.py
```

**–í–∞–∂–Ω–æ**:
- –ù–∞—á–∏–Ω–∞—Ç—å —Å –º–∞–ª–æ–≥–æ –±–∞–ª–∞–Ω—Å–∞ ($100-$500)
- –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ —É–≤–µ–ª–∏—á–∏–≤–∞—Ç—å –ø–æ—Å–ª–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
- –°–ª–µ–¥–∏—Ç—å –∑–∞ –∫–æ–º–∏—Å—Å–∏—è–º–∏ (Binance: 0.1%)
- –ü—Ä–æ–≤–µ—Ä—è—Ç—å –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ –æ—Ä–¥–µ—Ä–æ–≤

---

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö –≤–µ—Ä—Å–∏–π

| –í–µ—Ä—Å–∏—è | Return | Win Rate | DD | Sharpe | Trades | –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è |
|--------|--------|----------|-----|--------|--------|--------------|
| **v1 MR** | -1.86% | 50.0% | 4.85% | -0.52 | 2 | ‚ùå –°–ª–∏—à–∫–æ–º –º–∞–ª–æ —Å–¥–µ–ª–æ–∫ |
| **v2 MR** | -0.93% | 71.4% | 4.02% | -0.10 | 7 | ‚ö†Ô∏è –õ—É—á—à–∞—è MR –¥–æ v5 |
| **v3 MR** | -1.38% | 60.0% | 5.39% | -0.34 | 5 | ‚ùå –°–ª–∏—à–∫–æ–º –º–∞–ª–æ —Å–¥–µ–ª–æ–∫ |
| **v4 MR** | -3.84% | 63.6% | 4.97% | -0.30 | 11 | ‚ùå –ë–æ–ª—å—à–∏–µ –ø–æ—Ç–µ—Ä–∏ |
| **v5 MR** | -1.20% | 71.4% | 1.99% | -0.13 | 7 | ‚ö†Ô∏è –•–æ—Ä–æ—à–∏–µ —Ñ–∏–ª—å—Ç—Ä—ã, –Ω–æ —É–±—ã—Ç–æ–∫ |
| **TF** | -1.09% | 42.1% | 4.24% | 0.21 | 19 | ‚ö†Ô∏è Baseline |
| üèÜ **HYBRID** | **+1.29%** | **71.4%** | **1.56%** | **1.08** | 7 | ‚úÖ **–õ–£–ß–®–ê–Ø** |

---

## ‚úÖ –ß–µ–∫-–ª–∏—Å—Ç –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º

- [ ] –í—ã–±—Ä–∞–Ω–∞ —Å—Ç—Ä–∞—Ç–µ–≥–∏—è (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è HYBRID)
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ `config.py`
- [ ] –ó–∞–ø—É—â–µ–Ω –±—ç–∫—Ç–µ—Å—Ç (–ø—Ä–æ–≤–µ—Ä–µ–Ω—ã —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã)
- [ ] Win Rate > 65%
- [ ] Sharpe Ratio > 0.5
- [ ] Max Drawdown < 10%
- [ ] –ó–∞–ø—É—â–µ–Ω paper trading (2-4 –Ω–µ–¥–µ–ª–∏)
- [ ] Paper trading –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω—É—é –ø—Ä–∏–±—ã–ª—å
- [ ] –õ–æ–≥–∏ –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã –Ω–∞ –æ—à–∏–±–∫–∏
- [ ] –ì–æ—Ç–æ–≤ –∫ –∑–∞–ø—É—Å–∫—É –Ω–∞ –º–∞–ª–æ–º –±–∞–ª–∞–Ω—Å–µ

---

## üìÅ –§–∞–π–ª—ã –ø—Ä–æ–µ–∫—Ç–∞

```
TradeBot/
‚îú‚îÄ‚îÄ config.py                  # ‚Üê –ü–∞—Ä–∞–º–µ—Ç—Ä—ã v5 + Hybrid
‚îú‚îÄ‚îÄ signal_generator.py        # ‚Üê generate_signal_hybrid()
‚îú‚îÄ‚îÄ backtest_mean_reversion.py # ‚Üê –ë—ç–∫—Ç–µ—Å—Ç v5 MR
‚îú‚îÄ‚îÄ backtest_hybrid.py         # ‚Üê –ë—ç–∫—Ç–µ—Å—Ç Hybrid
‚îú‚îÄ‚îÄ bot.py                     # ‚Üê –î–ª—è live trading
‚îú‚îÄ‚îÄ paper_trader.py            # ‚Üê –î–ª—è paper trading
‚îú‚îÄ‚îÄ mean_reversion_trades.csv  # ‚Üê –†–µ–∑—É–ª—å—Ç–∞—Ç—ã v5 MR
‚îú‚îÄ‚îÄ hybrid_trades.csv          # ‚Üê –†–µ–∑—É–ª—å—Ç–∞—Ç—ã Hybrid
‚îú‚îÄ‚îÄ equity_curve_comparison.png
‚îú‚îÄ‚îÄ equity_curve_hybrid.png
‚îú‚îÄ‚îÄ FINAL_COMPARISON_v5_vs_HYBRID.md  # ‚Üê –ê–Ω–∞–ª–∏–∑
‚îî‚îÄ‚îÄ USAGE_GUIDE_v5_HYBRID.md   # ‚Üê –≠—Ç–∞ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è
```

---

**–î–∞—Ç–∞**: 2025-10-12  
**–í–µ—Ä—Å–∏—è**: v5 + Hybrid v1  
**–ê–≤—Ç–æ—Ä**: AI Trading Bot Assistant  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ Ready for Production

