#!/bin/bash

# –°–∫—Ä–∏–ø—Ç –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –±–æ—Ç–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

set -e

echo "üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Trading Bot..."

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–æ—Ç–∞
echo "‚è∏Ô∏è  –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–æ—Ç–∞..."
sudo systemctl stop tradebot || true

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ git
echo "üì• –ü–æ–ª—É—á–µ–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –∏–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è..."
git pull

# –ê–∫—Ç–∏–≤–∞—Ü–∏—è venv
source venv/bin/activate

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
echo "üì¶ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π..."
pip install --upgrade -r requirements.txt

# –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
echo "‚ñ∂Ô∏è  –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞..."
sudo systemctl start tradebot

echo "‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ!"
echo "üìä –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å: sudo systemctl status tradebot"

