# üîç –†–£–ö–û–í–û–î–°–¢–í–û –ü–û –î–ò–ê–ì–ù–û–°–¢–ò–ö–ï –°–ò–ì–ù–ê–õ–û–í v5.5

**–î–∞—Ç–∞:** 14 –æ–∫—Ç—è–±—Ä—è 2025  
**–í–µ—Ä—Å–∏—è:** HYBRID v5.5 + Signal Diagnostics  

---

## üìã –°–û–î–ï–†–ñ–ê–ù–ò–ï

1. [–ß—Ç–æ –æ–±–Ω–æ–≤–ª–µ–Ω–æ](#—á—Ç–æ-–æ–±–Ω–æ–≤–ª–µ–Ω–æ)
2. [–ù–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã Telegram](#–Ω–æ–≤—ã–µ-–∫–æ–º–∞–Ω–¥—ã-telegram)
3. [–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ](#–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ)
4. [–ö–∞–∫ –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ª–æ–≥–∏](#–∫–∞–∫-–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å-–ª–æ–≥–∏)
5. [–ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã](#—á–∞—Å—Ç—ã–µ-–ø—Ä–æ–±–ª–µ–º—ã)
6. [–ü—Ä–∏–º–µ—Ä—ã](#–ø—Ä–∏–º–µ—Ä—ã)

---

## üÜï –ß–¢–û –û–ë–ù–û–í–õ–ï–ù–û

### 1. **paper_trader.py**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ **adaptive position sizing** –∏–∑ v5.5
- ‚úÖ –†–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏ —Å–∏–≥–Ω–∞–ª–æ–≤:
  - `active_mode` (MR/TF)
  - `bullish_votes` –∏ `bearish_votes`
  - `votes_delta`
  - `position_size_percent`
  - `reasons` (—Ç–æ–ø-3 –ø—Ä–∏—á–∏–Ω—ã —Å–∏–≥–Ω–∞–ª–∞)
- ‚úÖ –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞–∂–¥–æ–≥–æ —ç—Ç–∞–ø–∞ –æ—Ç–∫—Ä—ã—Ç–∏—è –ø–æ–∑–∏—Ü–∏–∏

### 2. **signal_diagnostics.py** (–Ω–æ–≤—ã–π —Ñ–∞–π–ª)
- ‚úÖ –ö–ª–∞—Å—Å `SignalDiagnostics` –¥–ª—è —Å–±–æ—Ä–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
- ‚úÖ –ú–µ—Ç–æ–¥—ã:
  - `log_signal_generation()` - –ª–æ–≥–∏—Ä—É–µ—Ç –∫–∞–∂–¥—ã–π —Å–∏–≥–Ω–∞–ª
  - `log_position_check()` - –ª–æ–≥–∏—Ä—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫—É –ø–æ–∑–∏—Ü–∏–π
  - `print_summary()` - –≤—ã–≤–æ–¥–∏—Ç —Å–≤–æ–¥–∫—É
  - `analyze_vote_distribution()` - –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≥–æ–ª–æ—Å–æ–≤

### 3. **telegram_bot.py**
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å `signal_diagnostics`
- ‚úÖ –ü–µ—Ä–µ–¥–∞—á–∞ –≤—Å–µ—Ö –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –≤ `paper_trader.open_position()`
- ‚úÖ –î–≤–µ –Ω–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã:
  - `/signal_stats` - –±—ã—Å—Ç—Ä–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
  - `/signal_analysis` - –¥–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑

---

## ü§ñ –ù–û–í–´–ï –ö–û–ú–ê–ù–î–´ TELEGRAM

### `/signal_stats`
**–ë—ã—Å—Ç—Ä–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Å–∏–≥–Ω–∞–ª–∞–º**

–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç:
- –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–∏–≥–Ω–∞–ª–æ–≤ (BUY/HOLD/SELL)
- –ü—Ä–æ—Ü–µ–Ω—Ç–Ω–æ–µ —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ
- –í—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ BUY —Å–∏–≥–Ω–∞–ª–∞
- –¢–æ–ø-5 –ø—Ä–∏—á–∏–Ω –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ BUY
- –ü–æ—Å–ª–µ–¥–Ω–∏–µ 5 —Å–∏–≥–Ω–∞–ª–æ–≤

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
```
/signal_stats
```

**–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:**
```
üìä –°–¢–ê–¢–ò–°–¢–ò–ö–ê –°–ò–ì–ù–ê–õ–û–í v5.5

–í—Å–µ–≥–æ —Å–∏–≥–Ω–∞–ª–æ–≤: 120
‚Ä¢ BUY:  5 (4.2%)
‚Ä¢ HOLD: 110 (91.7%)
‚Ä¢ SELL: 5 (4.2%)

–ü–æ—Å–ª–µ–¥–Ω–∏–π BUY: 2025-10-14T15:30:22

üö´ –ü—Ä–∏—á–∏–Ω—ã –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ BUY:
‚Ä¢ –õ–∏–º–∏—Ç –ø–æ–∑–∏—Ü–∏–π –∏–ª–∏ –±–∞–ª–∞–Ω—Å: 3x
‚Ä¢ –°–∏–≥–Ω–∞–ª HOLD, –Ω–µ BUY: 110x

üìã –ü–æ—Å–ª–µ–¥–Ω–∏–µ 5 —Å–∏–≥–Ω–∞–ª–æ–≤:
‚úÖ BTCUSDT: BUY (Œî+6, TREND_FOLLOWING)
‚ùå ETHUSDT: HOLD (Œî+2, MEAN_REVERSION)
‚ùå BNBUSDT: HOLD (Œî-1, MEAN_REVERSION)
‚ùå SOLUSDT: SELL (Œî-4, MEAN_REVERSION)
‚úÖ BTCUSDT: BUY (Œî+7, TREND_FOLLOWING)
```

---

### `/signal_analysis`
**–î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –≥–æ–ª–æ—Å–æ–≤**

–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç:
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫—É delta (min/max/avg/median)
- –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ –¥–∏–∞–ø–∞–∑–æ–Ω–∞–º
- –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
```
/signal_analysis
```

**–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:**
```
üîç –ê–ù–ê–õ–ò–ó –†–ê–°–ü–†–ï–î–ï–õ–ï–ù–ò–Ø –ì–û–õ–û–°–û–í

–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:
‚Ä¢ Min delta: -8
‚Ä¢ Max delta: +7
‚Ä¢ Avg delta: -0.5
‚Ä¢ Median: +1

–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ:
‚Ä¢ –°–∏–ª—å–Ω–æ bearish (<-5): 5 (4.2%)
‚Ä¢ –°—Ä–µ–¥–Ω–µ bearish (-5..-3): 10 (8.3%)
‚Ä¢ –°–ª–∞–±–æ bearish (-3..0): 30 (25.0%)
‚Ä¢ –°–ª–∞–±–æ bullish (0..3): 50 (41.7%)
‚Ä¢ –°—Ä–µ–¥–Ω–µ bullish (3..4): 20 (16.7%)
‚Ä¢ üéØ BUY (>=5): 5 (4.2%)

üí° –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò:
‚úÖ 5 —Å–∏–≥–Ω–∞–ª–æ–≤ –≥–æ—Ç–æ–≤—ã –∫ BUY (4.2%)
```

---

## üìù –õ–û–ì–ò–†–û–í–ê–ù–ò–ï

### –£—Ä–æ–≤–Ω–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è:

**1. INFO** - –æ—Å–Ω–æ–≤–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è
- –û—Ç–∫—Ä—ã—Ç–∏–µ/–∑–∞–∫—Ä—ã—Ç–∏–µ –ø–æ–∑–∏—Ü–∏–π
- BUY —Å–∏–≥–Ω–∞–ª—ã
- –°–º–µ–Ω–∞ —Ä–µ–∂–∏–º–æ–≤ (MR/TF)

**2. DEBUG** - –¥–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
- HOLD/SELL —Å–∏–≥–Ω–∞–ª—ã
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∏—Å—Ç–∞–Ω—Ü–∏–π –¥–æ SL/TP
- –†–∞—Å—á—ë—Ç—ã Kelly –∏ position sizing

**3. WARNING** - –≤–∞–∂–Ω—ã–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è
- –ö–æ–Ω—Ñ–ª–∏–∫—Ç—ã –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤
- –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Å–∏–≥–Ω–∞–ª–æ–≤
- –°—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–µ SL

---

### –§–æ—Ä–º–∞—Ç –ª–æ–≥–æ–≤:

#### **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–∏–≥–Ω–∞–ª–∞ (BUY):**
```
================================================================================
[SIGNAL_DIAG] üìä BTCUSDT @ $67234.50 | 2025-10-14T15:30:22
[SIGNAL_DIAG] –°–∏–≥–Ω–∞–ª: BUY | –†–µ–∂–∏–º: TREND_FOLLOWING
[SIGNAL_DIAG] –ì–æ–ª–æ—Å–∞: Bullish=8, Bearish=2, Delta=+6
[SIGNAL_DIAG] üéØ BUY –°–ò–ì–ù–ê–õ –û–ë–ù–ê–†–£–ñ–ï–ù!
[SIGNAL_DIAG] Position Size: 50.0%
[SIGNAL_DIAG] –¢–æ–ø-3 –ø—Ä–∏—á–∏–Ω—ã:
[SIGNAL_DIAG]   1. EMA_short (67100.00) > EMA_long (66500.00) ‚Äî –±—ã—á–∏–π —Ç—Ä–µ–Ω–¥ [+2]
[SIGNAL_DIAG]   2. MACD (120.45) > MACD_signal (110.30) ‚Äî –±—ã—á—å–µ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–µ [+2]
[SIGNAL_DIAG]   3. –û–±—ä—ë–º 1.8x –≤—ã—à–µ —Å—Ä–µ–¥–Ω–µ–≥–æ ‚Äî –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Ä–æ—Å—Ç–∞ [+2]
[SIGNAL_DIAG] ‚úÖ –°–∏–≥–Ω–∞–ª –º–æ–∂–µ—Ç –±—ã—Ç—å –∏—Å–ø–æ–ª–Ω–µ–Ω
================================================================================
```

#### **–û—Ç–∫—Ä—ã—Ç–∏–µ –ø–æ–∑–∏—Ü–∏–∏:**
```
============================================================
[OPEN_POSITION] üìä –ü–æ–ø—ã—Ç–∫–∞ –æ—Ç–∫—Ä—ã—Ç—å –ø–æ–∑–∏—Ü–∏—é BTCUSDT
[OPEN_POSITION] –†–µ–∂–∏–º: TREND_FOLLOWING | –¶–µ–Ω–∞: $67234.5000
[OPEN_POSITION] –ì–æ–ª–æ—Å–∞: +8/-2 (delta=+6)
[OPEN_POSITION] –°–∏–ª–∞ —Å–∏–≥–Ω–∞–ª–∞: 6, ATR: 890.1234
[OPEN_POSITION] üìã –ü—Ä–∏—á–∏–Ω—ã: ['EMA_short > EMA_long', 'MACD –±—ã—á—å–µ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–µ', '–û–±—ä—ë–º –≤—ã—Å–æ–∫–∏–π']
[OPEN_POSITION] üéØ Position size (adaptive v5.5): 50.0%
[OPEN_POSITION] üí∞ –ò–Ω–≤–µ—Å—Ç–∏—Ü–∏—è: $50.00 (50.0% –æ—Ç –±–∞–ª–∞–Ω—Å–∞ $100.00)
[OPEN_POSITION] üí∏ –ö–æ–º–∏—Å—Å–∏—è: $0.09 (0.18%)
[OPEN_POSITION] ü™ô –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ: 0.000742 BTC
[OPEN_POSITION] üéØ SL: $66120.3450 (1.66%)
[OPEN_POSITION] üéØ TP: $68912.1350 (2.50%)
[OPEN_POSITION] üíµ –ë–∞–ª–∞–Ω—Å: $100.00 ‚Üí $50.00
[OPEN_POSITION] ‚úÖ –ü–æ–∑–∏—Ü–∏—è –æ—Ç–∫—Ä—ã—Ç–∞ —É—Å–ø–µ—à–Ω–æ!
[OPEN_POSITION] üìà –û—Ç–∫—Ä—ã—Ç—ã—Ö –ø–æ–∑–∏—Ü–∏–π: 1
============================================================
```

#### **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–∑–∏—Ü–∏–∏:**
```
============================================================
[POS_CHECK] üìà BTCUSDT @ $68500.00
[POS_CHECK] Entry: $67234.50 ‚Üí Change: +1.88%
[POS_CHECK] P&L: +1.70%
[POS_CHECK] SL: $66120.35 | TP: $68912.14
[POS_CHECK] –î–∏—Å—Ç–∞–Ω—Ü–∏—è –¥–æ SL: +3.60%
[POS_CHECK] –î–∏—Å—Ç–∞–Ω—Ü–∏—è –¥–æ TP: +0.60%
============================================================
```

---

## üîç –ö–ê–ö –ê–ù–ê–õ–ò–ó–ò–†–û–í–ê–¢–¨ –õ–û–ì–ò

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: "–ù–µ—Ç BUY —Å–∏–≥–Ω–∞–ª–æ–≤"

**1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –≤ Telegram:**
```
/signal_stats
```

**2. –ï—Å–ª–∏ BUY —Å–∏–≥–Ω–∞–ª–æ–≤ 0%, —Å–º–æ—Ç—Ä–∏—Ç–µ –∞–Ω–∞–ª–∏–∑:**
```
/signal_analysis
```

**3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ –ø—Ä–µ–¥–º–µ—Ç:**
- **Max delta < MIN_VOTES_FOR_BUY (5)**
  ```
  Avg delta: -2.5
  Max delta: +3
  ```
  ‚Üí –†—ã–Ω–æ–∫ –º–µ–¥–≤–µ–∂–∏–π, —Å—Ç—Ä–∞—Ç–µ–≥–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

- **–ö–æ–Ω—Ñ–ª–∏–∫—Ç—ã –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤** (–≤ v5.5 —Ä–µ–¥–∫–æ, –Ω–æ –±—ã–≤–∞–µ—Ç):
  ```
  [SIGNAL_DIAG] ‚ö†Ô∏è –û–±–Ω–∞—Ä—É–∂–µ–Ω—ã –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤:
  [SIGNAL_DIAG]   - ‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ù–û: RSI –ø–µ—Ä–µ–ø—Ä–æ–¥–∞–Ω, –Ω–æ Stochastic –ø–µ—Ä–µ–∫—É–ø–ª–µ–Ω
  ```

- **–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Ñ–∏–ª—å—Ç—Ä–∞–º–∏:**
  ```
  [SIGNAL_DIAG] ‚è∏Ô∏è HOLD - –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –≥–æ–ª–æ—Å–æ–≤ (delta=+3, –Ω—É–∂–Ω–æ >=5)
  ```

**4. –†–µ—à–µ–Ω–∏—è:**
- –ï—Å–ª–∏ `max_delta < 5` ‚Üí —Å–Ω–∏–∑–∏—Ç—å `MIN_VOTES_FOR_BUY` –≤ `config.py`
- –ï—Å–ª–∏ —Ä—ã–Ω–æ–∫ –º–µ–¥–≤–µ–∂–∏–π ‚Üí –ø–æ–¥–æ–∂–¥–∞—Ç—å –±—ã—á—å–µ–π —Ñ–∞–∑—ã
- –ï—Å–ª–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã ‚Üí –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö

---

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: "–°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ —Å–∏–≥–Ω–∞–ª–æ–≤"

**1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É:**
```
/signal_stats
```

**2. –ï—Å–ª–∏ BUY > 20% –æ—Ç –≤—Å–µ—Ö —Å–∏–≥–Ω–∞–ª–æ–≤:**
```
–í—Å–µ–≥–æ —Å–∏–≥–Ω–∞–ª–æ–≤: 100
‚Ä¢ BUY: 25 (25%)  ‚Üê –°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ!
```

**3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:**
- **–°–ª–∞–±—ã–µ —Å–∏–≥–Ω–∞–ª—ã –æ—Ç–∫—Ä—ã–≤–∞—é—Ç—Å—è:**
  ```
  [SIGNAL_DIAG] –ì–æ–ª–æ—Å–∞: Bullish=6, Bearish=1, Delta=+5
  [SIGNAL_DIAG] Position Size: 35.0%  ‚Üê –ú–∞–ª–µ–Ω—å–∫–∞—è –ø–æ–∑–∏—Ü–∏—è = —Å–ª–∞–±—ã–π —Å–∏–≥–Ω–∞–ª
  ```

**4. –†–µ—à–µ–Ω–∏—è:**
- –ü–æ–≤—ã—Å–∏—Ç—å `MIN_VOTES_FOR_BUY` –¥–æ 6-7
- –î–æ–±–∞–≤–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã –≤ `config.py`
- –£–≤–µ–ª–∏—á–∏—Ç—å `HYBRID_MIN_TIME_IN_MODE`

---

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: "–ü–æ–∑–∏—Ü–∏–∏ –∑–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è –ø–æ SL"

**1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –∑–∞–∫—Ä—ã—Ç–∏—è:**
```
[CLOSE_POSITION] üî¥ –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ–∑–∏—Ü–∏–∏ BTCUSDT
[CLOSE_POSITION] –ü—Ä–∏—á–∏–Ω–∞: STOP-LOSS
[CLOSE_POSITION] üíî –£–ë–´–¢–û–ö: $-1.50 (-3.00%)
```

**2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π SL:**
```
[OPEN_POSITION] üéØ SL: $66120.35 (1.66%)  ‚Üê –°–ª–∏—à–∫–æ–º —É–∑–∫–∏–π?
```

**3. –†–µ—à–µ–Ω–∏—è:**
- –£–≤–µ–ª–∏—á–∏—Ç—å `DYNAMIC_SL_ATR_MULTIPLIER` (—Å–µ–π—á–∞—Å 2.0 ‚Üí 2.5)
- –£–≤–µ–ª–∏—á–∏—Ç—å `DYNAMIC_SL_MIN` (—Å–µ–π—á–∞—Å 0.015 ‚Üí 0.020)
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å —Ä—ã–Ω–∫–∞ (ATR)

---

## ‚ö†Ô∏è –ß–ê–°–¢–´–ï –ü–†–û–ë–õ–ï–ú–´

### –ü—Ä–æ–±–ª–µ–º–∞ 1: **0 BUY —Å–∏–≥–Ω–∞–ª–æ–≤, –Ω–æ —Ä—ã–Ω–æ–∫ —Ä–∞—Å—Ç—ë—Ç**

**–°–∏–º–ø—Ç–æ–º—ã:**
```
Max delta: +3
Avg delta: +1.5
```

**–ü—Ä–∏—á–∏–Ω–∞:** –§–∏–ª—å—Ç—Ä—ã —Å–ª–∏—à–∫–æ–º —Å—Ç—Ä–æ–≥–∏–µ

**–†–µ—à–µ–Ω–∏–µ:**
```python
# config.py
MIN_VOTES_FOR_BUY = 3  # –±—ã–ª–æ 5
```

---

### –ü—Ä–æ–±–ª–µ–º–∞ 2: **BUY —Å–∏–≥–Ω–∞–ª—ã –±–ª–æ–∫–∏—Ä—É—é—Ç—Å—è**

**–°–∏–º–ø—Ç–æ–º—ã:**
```
üö´ –ü—Ä–∏—á–∏–Ω—ã –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ BUY:
‚Ä¢ –õ–∏–º–∏—Ç –ø–æ–∑–∏—Ü–∏–π –∏–ª–∏ –±–∞–ª–∞–Ω—Å: 50x
```

**–ü—Ä–∏—á–∏–Ω–∞:** –î–æ—Å—Ç–∏–≥–Ω—É—Ç –ª–∏–º–∏—Ç –ø–æ–∑–∏—Ü–∏–π

**–†–µ—à–µ–Ω–∏–µ:**
- –£–≤–µ–ª–∏—á–∏—Ç—å –±–∞–ª–∞–Ω—Å (–±–æ–ª—å—à–µ –±–∞–ª–∞–Ω—Å ‚Üí –±–æ–ª—å—à–µ `MAX_POSITIONS`)
- –ó–∞–∫—Ä—ã—Ç—å —Å—Ç–∞—Ä—ã–µ –ø–æ–∑–∏—Ü–∏–∏ –≤—Ä—É—á–Ω—É—é
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å `get_dynamic_max_positions()`

---

### –ü—Ä–æ–±–ª–µ–º–∞ 3: **–ö–æ–Ω—Ñ–ª–∏–∫—Ç—ã –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ (v5.5 —Ä–µ–¥–∫–æ)**

**–°–∏–º–ø—Ç–æ–º—ã:**
```
‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ù–û: RSI –ø–µ—Ä–µ–ø—Ä–æ–¥–∞–Ω, –Ω–æ Stochastic –ø–µ—Ä–µ–∫—É–ø–ª–µ–Ω
```

**–ü—Ä–∏—á–∏–Ω–∞:** –≠–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω–æ–µ —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–µ –æ—Å—Ü–∏–ª–ª—è—Ç–æ—Ä–æ–≤

**–†–µ—à–µ–Ω–∏–µ:**
- –ü–æ–¥–æ–∂–¥–∞—Ç—å —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏ —Ä—ã–Ω–∫–∞
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö
- –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ –≤ v5.5 (—Ñ–∏–ª—å—Ç—Ä—ã —É–ø—Ä–æ—â–µ–Ω—ã)

---

### –ü—Ä–æ–±–ª–µ–º–∞ 4: **–ú–∞–ª–µ–Ω—å–∫–∏–µ –ø–æ–∑–∏—Ü–∏–∏ (< 30%)**

**–°–∏–º–ø—Ç–æ–º—ã:**
```
[OPEN_POSITION] üéØ Position size (adaptive v5.5): 25.0%
```

**–ü—Ä–∏—á–∏–Ω–∞:** –°–ª–∞–±—ã–π —Å–∏–≥–Ω–∞–ª (votes_delta < 5)

**–†–µ—à–µ–Ω–∏–µ:**
- –≠—Ç–æ **–Ω–æ—Ä–º–∞–ª—å–Ω–æ** –¥–ª—è –∞–¥–∞–ø—Ç–∏–≤–Ω–æ–≥–æ sizing!
- –°–∏–ª—å–Ω—ã–µ —Å–∏–≥–Ω–∞–ª—ã (delta ‚â•7) ‚Üí 70%
- –°—Ä–µ–¥–Ω–∏–µ (delta 5-6) ‚Üí 50%
- –°–ª–∞–±—ã–µ (delta 3-4) ‚Üí 35%

---

## üìä –ü–†–ò–ú–ï–†–´ –î–ò–ê–ì–ù–û–°–¢–ò–ö–ò

### –ü—Ä–∏–º–µ—Ä 1: –£—Å–ø–µ—à–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ—Ç BUY —Å–∏–≥–Ω–∞–ª–æ–≤ 3 –¥–Ω—è

**–î–µ–π—Å—Ç–≤–∏—è:**
1. `/signal_stats` ‚Üí BUY: 0%
2. `/signal_analysis` ‚Üí Max delta: +3, Avg: -1.2
3. –ü—Ä–æ–≤–µ—Ä–∏–ª –ª–æ–≥–∏ ‚Üí HOLD –∏–∑-–∑–∞ delta < 5
4. –°–Ω–∏–∑–∏–ª `MIN_VOTES_FOR_BUY` –¥–æ 3
5. –†–µ–∑—É–ª—å—Ç–∞—Ç: –ø–æ—è–≤–∏–ª–∏—Å—å BUY —Å–∏–≥–Ω–∞–ª—ã

---

### –ü—Ä–∏–º–µ—Ä 2: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è position sizing

**–ü—Ä–æ–±–ª–µ–º–∞:** –í—Å–µ –ø–æ–∑–∏—Ü–∏–∏ –æ—Ç–∫—Ä—ã–≤–∞—é—Ç—Å—è –Ω–∞ 50%

**–î–µ–π—Å—Ç–≤–∏—è:**
1. –ü—Ä–æ–≤–µ—Ä–∏–ª –ª–æ–≥–∏:
   ```
   Position size (legacy): 50.0%
   ```
2. –ü–æ–Ω—è–ª: `telegram_bot.py` –Ω–µ –ø–µ—Ä–µ–¥–∞—ë—Ç `position_size_percent`
3. –û–±–Ω–æ–≤–∏–ª –∫–æ–¥ (—É–∂–µ —Å–¥–µ–ª–∞–Ω–æ –≤ v5.5)
4. –†–µ–∑—É–ª—å—Ç–∞—Ç:
   ```
   Position size (adaptive v5.5): 35.0%  ‚Üê –†–∞–±–æ—Ç–∞–µ—Ç!
   ```

---

## üéØ –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò

### ‚úÖ –î–µ–ª–∞–π—Ç–µ:
1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `/signal_stats` –∫–∞–∂–¥—ã–π –¥–µ–Ω—å
2. –ê–Ω–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≥–æ–ª–æ—Å–æ–≤ —Ä–∞–∑ –≤ –Ω–µ–¥–µ–ª—é
3. –°–æ—Ö—Ä–∞–Ω—è–π—Ç–µ –ª–æ–≥–∏ –≤ —Ñ–∞–π–ª –¥–ª—è –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞
4. –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ —Å–¥–µ–ª–æ–∫ –≤ –ë–î

### ‚ùå –ù–µ –¥–µ–ª–∞–π—Ç–µ:
1. –ù–µ –º–µ–Ω—è–π—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ—Å–ª–µ 1-2 —Å–∏–≥–Ω–∞–ª–æ–≤
2. –ù–µ –∏–≥–Ω–æ—Ä–∏—Ä—É–π—Ç–µ –º–µ–¥–≤–µ–∂–∏–π —Ä—ã–Ω–æ–∫ (avg_delta < 0)
3. –ù–µ –æ—Ç–∫–ª—é—á–∞–π—Ç–µ adaptive sizing
4. –ù–µ –ø–∞–Ω–∏–∫—É–π—Ç–µ –ø—Ä–∏ 0 BUY —Å–∏–≥–Ω–∞–ª–æ–≤ (–ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä—ã–Ω–æ–∫!)

---

## üìÅ –§–ê–ô–õ–´

### –û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–µ:
- ‚úÖ `paper_trader.py` - –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–π sizing + –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ `telegram_bot.py` - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
- ‚úÖ `signal_generator.py` - —É–ø—Ä–æ—â—ë–Ω–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã (v5.5)

### –ù–æ–≤—ã–µ:
- ‚úÖ `signal_diagnostics.py` - –º–æ–¥—É–ª—å –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
- ‚úÖ `SIGNAL_DIAGNOSTICS_GUIDE.md` - —ç—Ç–æ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ

---

## üöÄ –ë–´–°–¢–†–´–ô –°–¢–ê–†–¢

### 1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞:
```bash
python bot.py
```

### 2. –ü–æ–¥–æ–∂–¥–∏—Ç–µ 10-15 –º–∏–Ω—É—Ç (–Ω–µ—Å–∫–æ–ª—å–∫–æ —Ü–∏–∫–ª–æ–≤)

### 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É:
```
/signal_stats
```

### 4. –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã:
```
/signal_analysis
```

### 5. –ò–∑—É—á–∏—Ç–µ –ª–æ–≥–∏:
```bash
tail -f logs/bot.log | grep SIGNAL_DIAG
```

---

## üí° –ò–ù–¢–ï–ì–†–ê–¶–ò–Ø –° PRODUCTION

### –î–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –ª–æ–≥–æ–≤:

**1. –°–æ–±–µ—Ä–∏—Ç–µ –ª–æ–≥–∏ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 100 —Å—Ç—Ä–æ–∫:**
```bash
tail -n 100 logs/bot.log > diagnostic_log.txt
```

**2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –º–Ω–µ —Ñ–∞–π–ª —Å:**
- –í—ã–≤–æ–¥ `/signal_stats`
- –í—ã–≤–æ–¥ `/signal_analysis`
- –§–∞–π–ª `diagnostic_log.txt`
- –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

**3. –Ø –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É—é –∏ –¥–∞–º —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
- –ö–∞–∫–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–∑–º–µ–Ω–∏—Ç—å
- –ü–æ—á–µ–º—É –Ω–µ—Ç —Å–∏–≥–Ω–∞–ª–æ–≤ (–∏–ª–∏ —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ)
- –ß—Ç–æ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –≤ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏

---

**–í–µ—Ä—Å–∏—è:** HYBRID v5.5 + Signal Diagnostics  
**–î–∞—Ç–∞:** 14 –æ–∫—Ç—è–±—Ä—è 2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–û–¢–û–í–û –ö –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Æ

üéØ **–¢–µ–ø–µ—Ä—å —É —Ç–µ–±—è –µ—Å—Ç—å –ø–æ–ª–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —Å–∏–≥–Ω–∞–ª–æ–≤! –ú–æ–∂–µ—à—å –ª–µ–≥–∫–æ –ø–æ–Ω—è—Ç—å –ø–æ—á–µ–º—É –Ω–µ—Ç BUY –∏–ª–∏ –ø–æ—á–µ–º—É –∏—Ö —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ.**

