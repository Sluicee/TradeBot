# üîß Update.sh Fix - Docker Migration Issue

## –ü—Ä–æ–±–ª–µ–º–∞
```
ModuleNotFoundError: No module named 'sqlalchemy'
```

## –ü—Ä–∏—á–∏–Ω–∞
`./update.sh` –ø—ã—Ç–∞–ª—Å—è –≤—ã–ø–æ–ª–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —Ö–æ—Å—Ç–µ, –≥–¥–µ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω SQLAlchemy. –ú–∏–≥—Ä–∞—Ü–∏—è –¥–æ–ª–∂–Ω–∞ –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞.

## –†–µ—à–µ–Ω–∏–µ

### ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ update.sh
- **Docker deployments**: –ú–∏–≥—Ä–∞—Ü–∏—è –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç—Å—è –Ω–∞ —Ö–æ—Å—Ç–µ, –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
- **Systemd deployments**: –ú–∏–≥—Ä–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –Ω–∞ —Ö–æ—Å—Ç–µ (–≥–¥–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏)

### üîÑ –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã

#### –î–ª—è Docker:
```bash
# –ù–∞ —Ö–æ—Å—Ç–µ (update.sh):
‚ÑπÔ∏è  –ú–∏–≥—Ä–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ –≤ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ

# –í –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ (docker-entrypoint.sh):
üîÑ –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∏–≥—Ä–∞—Ü–∏–∏ –ë–î...
‚úÖ real_trading_state table already exists
‚úÖ real_trades table already exists  
‚úÖ bayesian_pending_signals table already exists
‚úÖ Real Trading tables migration completed
‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è –ë–î –∑–∞–≤–µ—Ä—à–µ–Ω–∞
```

#### –î–ª—è Systemd:
```bash
# –ù–∞ —Ö–æ—Å—Ç–µ (update.sh):
üîÑ –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö...
üìä –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö...
‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∑–∞–≤–µ—Ä—à–µ–Ω–∞
```

## –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### 1. –¢–µ–ø–µ—Ä—å `./update.sh` —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ:
```bash
./update.sh
```

### 2. –û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥ –¥–ª—è Docker:
```
üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Trading Bot...

üì¶ –û–±–Ω–∞—Ä—É–∂–µ–Ω Docker

üì• –ü–æ–ª—É—á–µ–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –∏–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è...
–£–∂–µ –∞–∫—Ç—É–∞–ª—å–Ω–æ.

‚ÑπÔ∏è  –ú–∏–≥—Ä–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ –≤ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ

üê≥ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞...
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è: docker compose
–û—Å—Ç–∞–Ω–æ–≤–∫–∞
–ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫
‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ!
üìä –ü—Ä–æ–≤–µ—Ä–∫–∞: docker-compose logs -f
```

### 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –º–∏–≥—Ä–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω–∏–ª–∞—Å—å –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ:
```bash
docker-compose logs tradebot | grep -i "migration"
```

–î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å:
```
üîÑ –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∏–≥—Ä–∞—Ü–∏–∏ –ë–î...
‚úÖ real_trading_state table already exists
‚úÖ real_trades table already exists  
‚úÖ bayesian_pending_signals table already exists
‚úÖ Real Trading tables migration completed
‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è –ë–î –∑–∞–≤–µ—Ä—à–µ–Ω–∞
```

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –º–∏–≥—Ä–∞—Ü–∏–∏

### Docker Flow:
1. **update.sh** - –ø–æ–ª—É—á–∞–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è, –ø–µ—Ä–µ—Å–æ–±–∏—Ä–∞–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
2. **docker-entrypoint.sh** - –≤—ã–ø–æ–ª–Ω—è–µ—Ç –º–∏–≥—Ä–∞—Ü–∏—é –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
3. **bot.py** - –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏

### Systemd Flow:
1. **update.sh** - –ø–æ–ª—É—á–∞–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è, –≤—ã–ø–æ–ª–Ω—è–µ—Ç –º–∏–≥—Ä–∞—Ü–∏—é –Ω–∞ —Ö–æ—Å—Ç–µ
2. **systemctl start tradebot** - –∑–∞–ø—É—Å–∫–∞–µ—Ç –±–æ—Ç–∞

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. –í—ã–ø–æ–ª–Ω–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:
```bash
./update.sh
```

### 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ Docker:
```bash
docker-compose logs -f tradebot
```

### 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –±–æ—Ç –∑–∞–ø—É—Å—Ç–∏–ª—Å—è:
```bash
docker-compose ps
```

## –†–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- ‚úÖ **update.sh —Ä–∞–±–æ—Ç–∞–µ—Ç** - –±–µ–∑ –æ—à–∏–±–æ–∫ SQLAlchemy –Ω–∞ —Ö–æ—Å—Ç–µ
- ‚úÖ **–ú–∏–≥—Ä–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è** - –≤–Ω—É—Ç—Ä–∏ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
- ‚úÖ **–ë–æ—Ç –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è** - –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏
- ‚úÖ **Real Trading –≥–æ—Ç–æ–≤** - –≤—Å–µ —Ç–∞–±–ª–∏—Ü—ã —Å–æ–∑–¥–∞–Ω—ã

**–ü—Ä–æ–±–ª–µ–º–∞ —Å –º–∏–≥—Ä–∞—Ü–∏–µ–π –Ω–∞ —Ö–æ—Å—Ç–µ —Ä–µ—à–µ–Ω–∞! üöÄ**
