# Multi-Timeframe Analysis - Summary

## ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### 1. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (`config.py`)
- ‚úÖ `USE_MULTI_TIMEFRAME` - –≤–∫–ª—é—á–µ–Ω–∏–µ/–≤—ã–∫–ª—é—á–µ–Ω–∏–µ MTF
- ‚úÖ `MTF_TIMEFRAMES` - —Å–ø–∏—Å–æ–∫ —Ç–∞–π–º—Ñ—Ä–µ–π–º–æ–≤ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ (15m, 1h, 4h)
- ‚úÖ `MTF_WEIGHTS` - –≤–µ—Å–∞ –¥–ª—è weighted voting
- ‚úÖ `MTF_MIN_AGREEMENT` - –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω—ã—Ö TF
- ‚úÖ `MTF_FULL_ALIGNMENT_BONUS` - –±–æ–Ω—É—Å –∑–∞ –ø–æ–ª–Ω–æ–µ —Å–æ–≥–ª–∞—Å–∏–µ

### 2. SignalGenerator (`signal_generator.py`)
- ‚úÖ –ù–æ–≤—ã–π –º–µ—Ç–æ–¥ `generate_signal_multi_timeframe()` (async)
- ‚úÖ –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –≤—Å–µ—Ö —Ç–∞–π–º—Ñ—Ä–µ–π–º–æ–≤
- ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–∏–≥–Ω–∞–ª–æ–≤ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ TF –æ—Ç–¥–µ–ª—å–Ω–æ
- ‚úÖ Weighted voting —Å —É—á—ë—Ç–æ–º –≤–µ—Å–æ–≤ –∏ confidence
- ‚úÖ Alignment detection (–ø–æ–ª–Ω–æ–µ/—á–∞—Å—Ç–∏—á–Ω–æ–µ —Å–æ–≥–ª–∞—Å–∏–µ)
- ‚úÖ –ö–æ–Ω—Ñ–ª–∏–∫—Ç –¥–µ—Ç–µ–∫—Ü–∏—è (HOLD –ø—Ä–∏ —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–∏ TF)
- ‚úÖ –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è —Å–∏–ª–∞ —Å–∏–≥–Ω–∞–ª–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç–∏

### 3. Telegram Bot (`telegram_bot.py`)
- ‚úÖ –û–±–Ω–æ–≤–ª—ë–Ω `_generate_signal_with_strategy()` –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ MTF
- ‚úÖ –ù–æ–≤–∞—è –∫–æ–º–∞–Ω–¥–∞ `/mtf_signal SYMBOL` –¥–ª—è MTF –∞–Ω–∞–ª–∏–∑–∞
- ‚úÖ –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ MTF —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ `_format_mtf_analysis()`
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ MTF –≤ —Ñ–æ–Ω–æ–≤–æ–º –º–æ–Ω–∏—Ç–æ—Ä–µ (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–æ)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –≤ help: `/mtf_signal`

### 4. Backtest (`backtest_multitf.py`)
- ‚úÖ –°—Ä–∞–≤–Ω–µ–Ω–∏–µ single TF vs MTF –Ω–∞ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ú–µ—Ç—Ä–∏–∫–∏: Win Rate, ROI, Avg P/L, Total Trades
- ‚úÖ –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π —Ä–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ alignment strength
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤ JSON

### 5. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (`test_mtf.py`)
- ‚úÖ –ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç MTF –∞–Ω–∞–ª–∏–∑–∞
- ‚úÖ –°—Ä–∞–≤–Ω–µ–Ω–∏–µ single TF vs MTF
- ‚úÖ –í—ã–≤–æ–¥ –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –ø–æ –∫–∞–∂–¥–æ–º—É TF

## üéØ –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### Weighted Voting
```python
MTF_WEIGHTS = {
    '15m': 0.30,  # –ö—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω—ã–π —Ç—Ä–µ–Ω–¥
    '1h': 0.40,   # –û—Å–Ω–æ–≤–Ω–æ–π —Ç–∞–π–º—Ñ—Ä–µ–π–º (–Ω–∞–∏–±–æ–ª—å—à–∏–π –≤–µ—Å)
    '4h': 0.30    # –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–π —Ç—Ä–µ–Ω–¥
}
```

### Alignment Detection
- **–ü–æ–ª–Ω–æ–µ —Å–æ–≥–ª–∞—Å–∏–µ** (3/3): –≤—Å–µ TF –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π —Å–∏–≥–Ω–∞–ª ‚Üí –±–æ–Ω—É—Å 1.5x
- **–ß–∞—Å—Ç–∏—á–Ω–æ–µ —Å–æ–≥–ª–∞—Å–∏–µ** (2/3): –º–∏–Ω–∏–º—É–º 2 TF —Å–æ–≥–ª–∞—Å–Ω—ã ‚Üí —Å–∏–≥–Ω–∞–ª –ø—Ä–∏–Ω–∏–º–∞–µ—Ç—Å—è
- **–ö–æ–Ω—Ñ–ª–∏–∫—Ç** (1-1-1 –∏–ª–∏ –ø–æ—Ö–æ–∂–µ): HOLD –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

### –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π —Ä–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏
- Alignment = 100% (3/3) ‚Üí 50-70% –±–∞–ª–∞–Ω—Å–∞
- Alignment = 67% (2/3) ‚Üí 30-50% –±–∞–ª–∞–Ω—Å–∞
- Alignment < 67% ‚Üí HOLD (–Ω–µ –≤—Ö–æ–¥–∏–º)

## üìä –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### 1. –ß–µ—Ä–µ–∑ Telegram Bot
```
/mtf_signal BTCUSDT
```

–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç:
- –ò—Ç–æ–≥–æ–≤—ã–π —Å–∏–≥–Ω–∞–ª —Å emoji
- –°–∏–≥–Ω–∞–ª—ã –ø–æ –∫–∞–∂–¥–æ–º—É —Ç–∞–π–º—Ñ—Ä–µ–π–º—É
- –°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å (%)
- Weighted scores
- –ü—Ä–∏—á–∏–Ω—ã —Ä–µ—à–µ–Ω–∏—è

### 2. –í –∫–æ–¥–µ
```python
from signal_generator import SignalGenerator
from data_provider import DataProvider

async with aiohttp.ClientSession() as session:
    provider = DataProvider(session)
    
    # –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ
    df = await provider.fetch_klines("BTCUSDT", "1h", 200)
    
    # –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º MTF —Å–∏–≥–Ω–∞–ª
    generator = SignalGenerator(df)
    generator.compute_indicators()
    result = await generator.generate_signal_multi_timeframe(
        data_provider=provider,
        symbol="BTCUSDT",
        strategy="HYBRID"
    )
    
    print(f"–°–∏–≥–Ω–∞–ª: {result['signal']}")
    print(f"–°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å: {result['alignment_strength']*100:.0f}%")
```

### 3. Backtest
```bash
python backtest_multitf.py BTCUSDT 1h 30
```

–°—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç single TF –∏ MTF –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 30 –¥–Ω–µ–π.

### 4. –ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç
```bash
python test_mtf.py
```

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### –í–∫–ª—é—á–µ–Ω–∏–µ/–≤—ã–∫–ª—é—á–µ–Ω–∏–µ MTF
–í `config.py`:
```python
USE_MULTI_TIMEFRAME = True  # –í–∫–ª—é—á–∏—Ç—å MTF
```

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ç–∞–π–º—Ñ—Ä–µ–π–º–æ–≤
```python
MTF_TIMEFRAMES = ['5m', '15m', '1h']  # –ë–æ–ª–µ–µ –∫–æ—Ä–æ—Ç–∫–∏–µ TF
# –∏–ª–∏
MTF_TIMEFRAMES = ['1h', '4h', '1d']  # –ë–æ–ª–µ–µ –¥–ª–∏–Ω–Ω—ã–µ TF
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤–µ—Å–æ–≤
```python
MTF_WEIGHTS = {
    '15m': 0.20,  # –ú–µ–Ω—å—à–∏–π –≤–µ—Å –∫–æ—Ä–æ—Ç–∫–æ–º—É TF
    '1h': 0.50,   # –ë–æ–ª—å—à–∏–π –≤–µ—Å –æ—Å–Ω–æ–≤–Ω–æ–º—É
    '4h': 0.30    # –°—Ä–µ–¥–Ω–∏–π –≤–µ—Å –¥–ª–∏–Ω–Ω–æ–º—É
}
```
**–í–∞–∂–Ω–æ:** —Å—É–º–º–∞ –≤–µ—Å–æ–≤ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å = 1.0

### –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ —Å–æ–≥–ª–∞—Å–∏–µ
```python
MTF_MIN_AGREEMENT = 2  # –ù—É–∂–Ω–æ 2 –∏–∑ 3 TF
# –∏–ª–∏
MTF_MIN_AGREEMENT = 3  # –ù—É–∂–Ω–æ –ø–æ–ª–Ω–æ–µ —Å–æ–≥–ª–∞—Å–∏–µ (–∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω–æ)
```

## ‚ö° –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –°–∫–æ—Ä–æ—Å—Ç—å
- Single TF: ~0.5-1 —Å–µ–∫
- MTF (3 TF): ~1-2 —Å–µ–∫ (–ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞)

### API –∑–∞–ø—Ä–æ—Å—ã
- Single TF: 1 –∑–∞–ø—Ä–æ—Å –∫ Bybit
- MTF: 3 –∑–∞–ø—Ä–æ—Å–∞ (–ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ)

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `asyncio.gather()` –¥–ª—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ, –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å)

## üìà –û–∂–∏–¥–∞–µ–º—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

–ü–æ –æ—Ü–µ–Ω–∫–∞–º:
- **Win Rate**: +10-20% (–º–µ–Ω—å—à–µ –ª–æ–∂–Ω—ã—Ö —Å–∏–≥–Ω–∞–ª–æ–≤)
- **ROI**: +5-15% (–ª—É—á—à–∏–µ —Ç–æ—á–∫–∏ –≤—Ö–æ–¥–∞)
- **Drawdown**: -15-25% (–∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã TF ‚Üí HOLD)

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (backtest)
2. ‚úÖ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –≤–µ—Å–∞ MTF_WEIGHTS –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
3. üìä –ó–∞–ø—É—Å—Ç–∏—Ç—å –Ω–∞ paper trading –Ω–∞ 1-2 –Ω–µ–¥–µ–ª–∏
4. üìä –°—Ä–∞–≤–Ω–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏ —Å single TF
5. üéØ –ü—Ä–∏ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö - –≤–∫–ª—é—á–∏—Ç—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- MTF –ª—É—á—à–µ –≤—Å–µ–≥–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Ç—Ä–µ–Ω–¥–æ–≤—ã—Ö —Ä—ã–Ω–∫–∞—Ö
- –ù–∞ —Ñ–ª—ç—Ç–µ –º–æ–∂–µ—Ç –¥–∞–≤–∞—Ç—å –º–µ–Ω—å—à–µ —Å–∏–≥–Ω–∞–ª–æ–≤ (–Ω–æ —ç—Ç–æ —Ö–æ—Ä–æ—à–æ - –º–µ–Ω—å—à–µ —É–±—ã—Ç–æ—á–Ω—ã—Ö —Å–¥–µ–ª–æ–∫)
- –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å HYBRID —Å—Ç—Ä–∞—Ç–µ–≥–∏–µ–π –¥–ª—è –±–∞–ª–∞–Ω—Å–∞
- –ú–æ–∂–Ω–æ –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞—Ç—å —Å –¥—Ä—É–≥–∏–º–∏ —Ñ–∏–ª—å—Ç—Ä–∞–º–∏ (sentiment, volume profile –∏ —Ç.–¥.)

## üêõ –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

- –£–≤–µ–ª–∏—á–µ–Ω–æ –≤—Ä–µ–º—è –∞–Ω–∞–ª–∏–∑–∞ –≤ 2-3 —Ä–∞–∑–∞ (–∏–∑-–∑–∞ –∑–∞–≥—Ä—É–∑–∫–∏ 3 TF)
- –ë–æ–ª—å—à–µ API –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ Bybit (–Ω–æ –≤ —Ä–∞–º–∫–∞—Ö –ª–∏–º–∏—Ç–æ–≤)
- –ù–∞ Windows console –º–æ–≥—É—Ç –±—ã—Ç—å –ø—Ä–æ–±–ª–µ–º—ã —Å emoji –≤ –≤—ã–≤–æ–¥–µ (—Ä–µ—à–µ–Ω–æ —á–µ—Ä–µ–∑ ASCII fallback)

## üìö –§–∞–π–ª—ã

- `config.py` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è MTF
- `signal_generator.py` - –ª–æ–≥–∏–∫–∞ MTF –∞–Ω–∞–ª–∏–∑–∞
- `telegram_bot.py` - –∫–æ–º–∞–Ω–¥—ã MTF –≤ –±–æ—Ç–µ
- `backtest_multitf.py` - –±—ç–∫—Ç–µ—Å—Ç single vs MTF
- `test_mtf.py` - –±—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç
- `MTF_IMPLEMENTATION_SUMMARY.md` - —ç—Ç–æ—Ç —Ñ–∞–π–ª

---

**–ê–≤—Ç–æ—Ä**: AI Assistant  
**–î–∞—Ç–∞**: 2025-10-12  
**–í–µ—Ä—Å–∏—è**: 1.0

