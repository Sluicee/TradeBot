# TradeBot Dashboard

–ü–∞–Ω–µ–ª—å –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–ª—è TradeBot –Ω–∞ –æ—Å–Ω–æ–≤–µ Streamlit.

## üìä –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### 1. –û–±–∑–æ—Ä
- KPI-–∫–∞—Ä—Ç–æ—á–∫–∏: –±–∞–ª–∞–Ω—Å, P&L, win rate, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–∑–∏—Ü–∏–π
- Equity curve (–≥—Ä–∞—Ñ–∏–∫ –∫–∞–ø–∏—Ç–∞–ª–∞)
- –ü–æ—Å–ª–µ–¥–Ω–∏–µ 5 —Å–¥–µ–ª–æ–∫

### 2. –¢–µ–∫—É—â–∏–µ –ø–æ–∑–∏—Ü–∏–∏
- –¢–∞–±–ª–∏—Ü–∞ –æ—Ç–∫—Ä—ã—Ç—ã—Ö –ø–æ–∑–∏—Ü–∏–π —Å –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–æ–∫—É–ø–∞–Ω–∏–π –∏ —Å—Ä–µ–¥–Ω—è—è —Ü–µ–Ω–∞ –≤—Ö–æ–¥–∞
- –ò—Å—Ç–æ—Ä–∏—è –¥–æ–∫—É–ø–∞–Ω–∏–π –¥–ª—è –∫–∞–∂–¥–æ–π –ø–æ–∑–∏—Ü–∏–∏
- –†–µ–∂–∏–º (PYRAMID/AVERAGE)

### 3. –ò—Å—Ç–æ—Ä–∏—è —Å–¥–µ–ª–æ–∫
- –§–∏–ª—å—Ç—Ä—ã –ø–æ —Å–∏–º–≤–æ–ª—É, —Ç–∏–ø—É —Å–¥–µ–ª–∫–∏, –ø—Ä–∏–±—ã–ª—å–Ω–æ—Å—Ç–∏
- –î–µ—Ç–∞–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –≤—Å–µ—Ö —Å–¥–µ–ª–æ–∫
- –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ P&L (–≥–∏—Å—Ç–æ–≥—Ä–∞–º–º–∞)
- –≠–∫—Å–ø–æ—Ä—Ç –≤ CSV

### 4. –ú–µ—Ç—Ä–∏–∫–∏
**–û—Å–Ω–æ–≤–Ω—ã–µ:**
- Total Trades, Win Rate, Profit Factor
- Winning/Losing Trades
- Average Win/Loss
- Max Consecutive Wins/Losses

**–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ:**
- Sharpe Ratio
- Sortino Ratio
- Maximum Drawdown
- Kelly Criterion —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è

**–ì—Ä–∞—Ñ–∏–∫–∏:**
- Equity Drawdown Chart
- Box plot —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è P&L

### 5. –ë—ç–∫—Ç–µ—Å—Ç—ã
- –ó–∞–≥—Ä—É–∑–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∏–∑ `backtests/`
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –±—ç–∫—Ç–µ—Å—Ç–∞
- –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –±—ç–∫—Ç–µ—Å—Ç–æ–≤
- Overlay equity curves

### 6. –ù–∞—Å—Ç—Ä–æ–π–∫–∏
- –í–∫–ª—é—á–µ–Ω–∏–µ/–≤—ã–∫–ª—é—á–µ–Ω–∏–µ Kelly Criterion
- –í–∫–ª—é—á–µ–Ω–∏–µ/–≤—ã–∫–ª—é—á–µ–Ω–∏–µ Averaging
- –í–∫–ª—é—á–µ–Ω–∏–µ/–≤—ã–∫–ª—é—á–µ–Ω–∏–µ Pyramid Mode
- –ü–∞—Ä–∞–º–µ—Ç—Ä—ã (Kelly Fraction, Max Averaging Attempts, Averaging Drop %)
- –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö
- –°–±—Ä–æ—Å paper trading

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
```bash
pip install -r requirements.txt
```

2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ bot –∑–∞–ø—É—â–µ–Ω –∏ —Å–æ–∑–¥–∞–Ω —Ñ–∞–π–ª `paper_trading_state.json`

3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ dashboard:
```bash
streamlit run dashboard.py
```

4. –û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä –ø–æ –∞–¥—Ä–µ—Å—É: http://localhost:8501

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

Dashboard –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑:
- `paper_trading_state.json` - —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ paper trading
- `backtests/` - —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –±—ç–∫—Ç–µ—Å—Ç–æ–≤
- `dashboard_settings.json` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ dashboard (—Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)

## üìù –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ config.py

### Kelly Criterion
```python
USE_KELLY_CRITERION = True  # –í–∫–ª—é—á–∏—Ç—å Kelly
KELLY_FRACTION = 0.25  # 25% –æ—Ç –ø–æ–ª–Ω–æ–≥–æ Kelly
MIN_TRADES_FOR_KELLY = 10  # –ú–∏–Ω–∏–º—É–º —Å–¥–µ–ª–æ–∫
KELLY_LOOKBACK_WINDOW = 50  # –°–∫–æ–ª—å–∑—è—â–µ–µ –æ–∫–Ω–æ
```

### Averaging
```python
ENABLE_AVERAGING = True  # –í–∫–ª—é—á–∏—Ç—å –¥–æ–∫—É–ø–∞–Ω–∏–µ
MAX_AVERAGING_ATTEMPTS = 2  # –ú–∞–∫—Å–∏–º—É–º –¥–æ–∫—É–ø–∞–Ω–∏–π
AVERAGING_PRICE_DROP_PERCENT = 0.05  # –ü–∞–¥–µ–Ω–∏–µ 5%
AVERAGING_TIME_THRESHOLD_HOURS = 24  # –ü–æ—Ä–æ–≥ –≤—Ä–µ–º–µ–Ω–∏
MAX_TOTAL_RISK_MULTIPLIER = 1.5  # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∏—Å–∫ 1.5x
```

### Pyramid Mode
```python
ENABLE_PYRAMID_UP = True  # –ü–∏—Ä–∞–º–∏–¥–∏–Ω–≥ –≤–≤–µ—Ä—Ö
PYRAMID_ADX_THRESHOLD = 25  # –ü–æ—Ä–æ–≥ ADX –¥–ª—è –ø–∏—Ä–∞–º–∏–¥–∏–Ω–≥–∞
```

## üîÑ –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ

Dashboard –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∫–∞–∂–¥—ã–µ 60 —Å–µ–∫—É–Ω–¥:
1. –í–∫–ª—é—á–∏—Ç–µ —á–µ–∫–±–æ–∫—Å "–ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ (60—Å)" –≤ –±–æ–∫–æ–≤–æ–π –ø–∞–Ω–µ–ª–∏
2. –ò–ª–∏ –Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "üîÑ –û–±–Ω–æ–≤–∏—Ç—å —Å–µ–π—á–∞—Å" –¥–ª—è —Ä—É—á–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

## üì± Telegram –∫–æ–º–∞–Ω–¥—ã

### Kelly Criterion
```
/kelly_info - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ Kelly Criterion –∏ —Ç–µ–∫—É—â–∞—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è
```

### Averaging
```
/averaging_status - –°—Ç–∞—Ç—É—Å –¥–æ–∫—É–ø–∞–Ω–∏–π –ø–æ –ø–æ–∑–∏—Ü–∏—è–º –∏ –æ–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
```

## üìà –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### Kelly Criterion
1. –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö 50 —Å–¥–µ–ª–æ–∫ (—Å–∫–æ–ª—å–∑—è—â–µ–µ –æ–∫–Ω–æ)
2. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç win rate, avg win, avg loss
3. –ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω–∞—è –¥—Ä–æ–±—å (25% –æ—Ç –ø–æ–ª–Ω–æ–≥–æ Kelly)
4. –ù–æ—Ä–º–∞–ª–∏–∑—É–µ—Ç—Å—è –ø–æ –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏ (ATR)
5. –†–µ–∑—É–ª—å—Ç–∞—Ç: –º–Ω–æ–∂–∏—Ç–µ–ª—å 0.5-1.5 –¥–ª—è —Ä–∞–∑–º–µ—Ä–∞ –ø–æ–∑–∏—Ü–∏–∏

### –£–º–Ω–æ–µ –¥–æ–∫—É–ø–∞–Ω–∏–µ
**AVERAGE_DOWN (—É—Å—Ä–µ–¥–Ω–µ–Ω–∏–µ –≤–Ω–∏–∑):**
- –¢—Ä–∏–≥–≥–µ—Ä: —Ü–µ–Ω–∞ —É–ø–∞–ª–∞ –Ω–∞ 5% –æ—Ç —Å—Ä–µ–¥–Ω–µ–π –ò –ø–æ–∑–∏—Ü–∏—è –≤–∏—Å–∏—Ç >24 —á–∞—Å–∞
- –†–∞–∑–º–µ—Ä: 50% –æ—Ç –∏—Å—Ö–æ–¥–Ω–æ–≥–æ
- –ü–µ—Ä–µ—Å—á—ë—Ç —Å—Ä–µ–¥–Ω–µ–π —Ü–µ–Ω—ã –∏ SL/TP

**PYRAMID_UP (–ø–∏—Ä–∞–º–∏–¥–∏–Ω–≥ –≤–≤–µ—Ä—Ö):**
- –¢—Ä–∏–≥–≥–µ—Ä: ADX > 25 (—Å–∏–ª—å–Ω—ã–π —Ç—Ä–µ–Ω–¥) –ò –Ω–æ–≤—ã–π BUY —Å–∏–≥–Ω–∞–ª
- –†–∞–∑–º–µ—Ä: 30% –æ—Ç –∏—Å—Ö–æ–¥–Ω–æ–≥–æ (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Å–∏–ª—ã —Å–∏–≥–Ω–∞–ª–∞)
- –î–æ–∫—É–ø–∞–µ–º –ø—Ä–∏ —Ä–æ—Å—Ç–µ —Ü–µ–Ω—ã –Ω–∞ 2%

**–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:**
- –ú–∞–∫—Å–∏–º—É–º 2-3 –¥–æ–∫—É–ø–∞–Ω–∏—è –Ω–∞ –ø–æ–∑–∏—Ü–∏—é
- –û–±—â–∏–π —Ä–∏—Å–∫ –Ω–µ –±–æ–ª–µ–µ 1.5x –æ—Ç –±–∞–∑–æ–≤–æ–≥–æ
- SL –Ω–µ —Å—É–∂–∞–µ—Ç—Å—è –ø—Ä–∏ —É—Å—Ä–µ–¥–Ω–µ–Ω–∏–∏ (–±–µ—Ä—ë—Ç—Å—è max)

## üéØ –ú–µ—Ç—Ä–∏–∫–∏

### Sharpe Ratio
–ì–æ–¥–æ–≤–æ–π Sharpe = (—Å—Ä–µ–¥–Ω—è—è –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å / —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ) √ó ‚àö252

### Sortino Ratio
–ö–∞–∫ Sharpe, –Ω–æ —É—á–∏—Ç—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ downside volatility

### Kelly Criterion
Kelly = (win_rate √ó avg_win - (1 - win_rate) √ó avg_loss) / avg_win

### Maximum Drawdown
–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–æ—Å–∞–¥–∫–∞ –æ—Ç –ø–∏–∫–∞ –±–∞–ª–∞–Ω—Å–∞ –≤ –ø—Ä–æ—Ü–µ–Ω—Ç–∞—Ö

## üí° –°–æ–≤–µ—Ç—ã

1. **Kelly Criterion**: –ù–∞—á–Ω–∏—Ç–µ —Å 25% (KELLY_FRACTION = 0.25), —ç—Ç–æ –∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω–æ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ
2. **Averaging**: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ MAX_AVERAGING_ATTEMPTS = 2, –±–æ–ª—å—à–µ –º–æ–∂–µ—Ç –ø—Ä–µ–≤—Ä–∞—Ç–∏—Ç—å—Å—è –≤ –º–∞—Ä—Ç–∏–Ω–≥–µ–π–ª
3. **Pyramid**: –í–∫–ª—é—á–∞–π—Ç–µ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –≤—ã—Å–æ–∫–æ–º ADX (>25), –∏–Ω–∞—á–µ –≤—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫
4. **Dashboard**: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É –ú–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏
5. **–ë—ç–∫—Ç–µ—Å—Ç—ã**: –°—Ä–∞–≤–Ω–∏–≤–∞–π—Ç–µ —Ä–∞–∑–Ω—ã–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ —Å—Ç—Ä–∞–Ω–∏—Ü—É –ë—ç–∫—Ç–µ—Å—Ç–æ–≤

## üêõ Troubleshooting

### Dashboard –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–µ—Ä—Å–∏—é Python (—Ç—Ä–µ–±—É–µ—Ç—Å—è 3.10+)
python --version

# –ü–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install -r requirements.txt --upgrade
```

### –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –≤ Dashboard
1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ paper trading –∑–∞–ø—É—â–µ–Ω: `/paper_start`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–ª–∏—á–∏–µ —Ñ–∞–π–ª–∞ `paper_trading_state.json`
3. –°–æ–≤–µ—Ä—à–∏—Ç–µ —Ö–æ—Ç—è –±—ã –æ–¥–Ω—É —Å–¥–µ–ª–∫—É

### –û—à–∏–±–∫–∞ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è
```bash
# –û—á–∏—Å—Ç–∏—Ç–µ –∫—ç—à Streamlit
streamlit cache clear
```

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ

- –í—Å–µ –≥—Ä–∞—Ñ–∏–∫–∏ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ (Plotly)
- –î–∞–Ω–Ω—ã–µ –∫—ç—à–∏—Ä—É—é—Ç—Å—è –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –∑–∞–≥—Ä—É–∑–∫–∏
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ `dashboard_settings.json`
- –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö –≤ CSV –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ "–ò—Å—Ç–æ—Ä–∏—è —Å–¥–µ–ª–æ–∫"

## üîó –°—Å—ã–ª–∫–∏

- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Streamlit: https://docs.streamlit.io/
- Plotly Documentation: https://plotly.com/python/
- Kelly Criterion: https://en.wikipedia.org/wiki/Kelly_criterion

